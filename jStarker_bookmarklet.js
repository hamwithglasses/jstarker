javascript: (function () {function hasClass(e,t){return(new RegExp(" "+t+" ")).test(" "+e.className+" ")}function addClass(e,t){if(!hasClass(e,t)){e.className+=" "+t}}function removeClass(e,t){var n=" "+e.className.replace(/[\t\r\n]/g," ")+" ";if(hasClass(e,t)){while(n.indexOf(" "+t+" ")>=0){n=n.replace(" "+t+" "," ")}e.className=n.replace(/^\s+|\s+$/g,"")}}var starkerContext;var cello;if(typeof AudioContext==="function")starkerContext=new AudioContext;else starkerContext=new webkitAudioContext;var jStarker=function(e){var t="bow",n=.5,r=false,i={},s={},o=false;if(e){if(e.playStyle!==undefined)t=e.playStyle;if(e.masterVolume!==undefined)n=e.masterVolume;if(e.drawCello!==undefined)r=e.drawCello}var u={48:"A4",49:"A#4",50:"B4",51:"C5",52:"C#5",53:"D5",54:"D#5",55:"E5",56:"F5",57:"F#5",80:"D4",81:"D#4",87:"E4",69:"F4",82:"F#4",84:"G4",89:"G#4",85:"A4",73:"A#4",79:"B4",186:"G3",65:"G#3",83:"A3",68:"A#3",70:"B3",71:"C4",72:"C#4",74:"D4",75:"D#4",76:"E4",191:"C3",90:"C#3",88:"D3",67:"D#3",86:"E3",66:"F3",78:"F#3",77:"G3",188:"G#3",190:"A3"};var a={48:[57,56,55,54,53,52,51,50,49,48],80:[79,73,85,89,84,82,69,87,81,80],186:[76,75,74,72,71,70,68,83,65,186],191:[190,188,77,78,66,86,67,88,90,191]};var f=function(e){return e==186||e==191||e==48||e==80};var l=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;var c=function(e){if(l&&e==59)return 186;return e};var h=function(e){var t=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],n,r,i=0;if(e.length===3)n=e.charAt(2);else n=e.charAt(1);if(o)i=7;r=t.indexOf(e.slice(0,-1))+i+(n-1)*12+4;return 440*Math.pow(2,(r-49)/12)};var p=function(){if(t=="bow"){for(var e in a){v(a[e],s[e])}}};var d=function(e){if(t=="pizz"){var n=a[e];if(n){v(n,s[e])}}};var v=function(e,t){var n=false;for(var r=0;r<e.length;r++){if(i[e[r]]){n=e[r];n=h(u[n]);if(t)t.frequency.setValueAtTime(n,starkerContext.currentTime);break}}};var m=function(e,t){e.type="square";e.frequency.value=t;var r=starkerContext.createGain();r.gain.value=n;e.connect(r);r.connect(starkerContext.destination);e.start(0)};var g=function(e){var t=c(e.keyCode);if(t!=33&&t!=34&&t!=38&&t!=40)e.preventDefault();if(u[t]){i[t]=true;E();if(f(t)){if(!s[t]){var n=starkerContext.createOscillator();m(n,h(u[t]));s[t]=n;d(t)}}p()}};var y=function(e){var t=c(e.keyCode);if(u[t]){delete i[t];E();if(f(t)){s[t].stop(0);delete s[t]}p()}else if(t==8){o=!o;console.log("Tenor clef: "+o)}};var b=["#ae5be1","#a962e1","#a26ae0","#9a74e0","#917edf","#8888df","#7e93df","#759ede","#6ca9de","#63b3dd","#5abddd","#53c6dd","#4dcddc","#48d3dc","#50d0d6","#5acfcd","#65cec3","#72cdb7","#7fccaa","#8dcb9d","#9cca8f","#abc981","#bac873","#c8c766","#d5c659","#e1c64e","#ecc544","#f4c43c"];var w=0;var E=function(){if(r){var e=document.querySelector("#jStarker .pressed");while(e){e.style.top="30px";e.style.lineHeight="50px";e.style.borderRadius="0";removeClass(e,"pressed");e=document.querySelector("#jStarker .pressed")}for(key in i){var t=document.getElementById("key"+key);if(t){t.style.top="0px";t.style.lineHeight="30px";t.style.borderRadius="5px 5px 0 0";addClass(t,"pressed")}}}};var S=function(e,t){var n=["0","-","1","2","3","4","+"];var r=document.createElement("li");var i=a[e];var s=document.createElement("ul");s.id=t+"-string";s.style.listStyle="none";s.style.padding=0;for(var o=0;o<7;o++){var u=document.createElement("li");u.style.position="relative";u.style.top="30px";u.style.lineHeight="50px";u.style.fontSize="15px";u.style.backgroundColor=b[w];u.style.float="left";u.style.width="3.57%";u.style.height="35px";u.style.WebkitTransition="top .075s, border-radius .1s, line-height .3s";u.style.borderRadius="0";w++;u.innerHTML=n[o];u.id="key"+i[i.length-1-o];s.appendChild(u)}return r.appendChild(s)};var x=function(){var e=document.createElement("ul");e.id="jStarker";e.style.listStyle="none";e.style.padding=0;e.style.margin=0;e.style.textAlign="center";e.style.height="35px";e.style.fontFamily="Arial, sans-serif";e.style.color="white";e.style.fontWeight="bold";e.style.position="fixed";e.style.left="0px";e.style.bottom="0px";e.style.width="100%";e.appendChild(S(191,"c"));e.appendChild(S(186,"g"));e.appendChild(S(80,"d"));e.appendChild(S(48,"a"));document.body.appendChild(e)};if(r)x();var T=starkerContext.createOscillator();m(T,440);T.stop(0);window.onkeydown=g;window.onkeyup=y};window.jStarker=jStarker;cello=new jStarker({drawCello:true})}());